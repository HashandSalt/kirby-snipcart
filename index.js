(function(){"use strict";const l={props:{initialTab:String,tabs:Array},data(){return{activeTab:this.initialTab}},computed:{tabPanelSlotName(){return`tab-panel-${this.activeTab}`}},methods:{tabHeadSlotName(a){return`tab-head-${a}`},switchTab(a){this.activeTab=a}}};function r(a,e,t,s,n,o,c,rt){var i=typeof a=="function"?a.options:a;return e&&(i.render=e,i.staticRenderFns=t,i._compiled=!0),{exports:a,options:i}}var d=function(){var e=this,t=e._self._c;return t("div",{staticClass:"card"},[t("header",{staticClass:"card-header"},[t("ul",{staticClass:"tab-heads"},e._l(e.tabs,function(s){return t("li",{key:s,staticClass:"tab-head",class:{"tab-head--active":e.activeTab===s},on:{click:function(n){return e.switchTab(s)}}},[e._t(e.tabHeadSlotName(s),function(){return[e._v(e._s(s)+" ")]})],2)}),0)]),t("main",{staticClass:"card-body"},[t("div",{staticClass:"tab-panel"},[e._t(e.tabPanelSlotName)],2)])])},_=[],u=r(l,d,_);const p=u.exports,m={data(){return{abandoned:null}},computed:{abandonedCount(){return this.abandoned?this.abandoned.length:"Loading..."}},async created(){let a=await this.$api.get("snipcart/carts/abandoned");this.abandoned=a.items}};var v=function(){var e=this,t=e._self._c;return t("div",{staticClass:"k-snipcart-vital"},[t("h3",[e._v("Abandonded Carts")]),t("span",[e._v(e._s(e.abandonedCount))])])},h=[],f=r(m,v,h);const b=f.exports,$={data(){return{totalSales:null}},computed:{salesCount(){return this.totalSales?this.totalSales:"Loading..."}},async created(){let e=(await this.$api.get("snipcart/orders")).items.reduce((t,s)=>t+s.finalGrandTotal,0).toFixed(2);this.totalSales=e}};var g=function(){var e=this,t=e._self._c;return t("div",{staticClass:"k-snipcart-vital"},[t("h3",[e._v("Total Sales")]),t("span",[e._v(e._s(e.salesCount))])])},y=[],C=r($,g,y);const S=C.exports,T={name:"popularItem",data(){return{popularItem:void 0,errors:[]}},computed:{popularCount(){return this.popularItem?this.popularItem:"Loading..."}},async created(){try{let t=(await this.$api.get("snipcart/orders",{pretty:!0})).items.reduce((n,o)=>n.concat(o.items),[]).map(({name:n})=>n).reduce((n,o)=>{const c=n[o]||0;return n[o]=c+1,n},{}),s=Object.keys(t).reduce((n,o)=>t[n]>t[o]?n:o);this.popularItem=s}catch(a){this.errors.push(a)}}};var x=function(){var e=this,t=e._self._c;return t("div",{staticClass:"k-snipcart-vital"},[t("h3",[e._v("Most Popular")]),t("span",[e._v(e._s(e.popularCount))])])},k=[],w=r(T,x,k);const D=w.exports,F={props:{name:String,columns:Object,options:Array,rows:{type:Array,default(){return[]}},empty:String},data(){return{tablecolumns:{invoiceNumber:{label:"Code",type:"text"},date:{label:"Date",type:"text"},status:{label:"Status",type:"text"},total:{label:"Total",type:"text"},shippingAddressCountry:{label:"Ship to",type:"text"}},orders:[]}},async created(){let e=(await this.$api.get("snipcart/orders?limit=500")).items.map(function(t){let s=new Date(Date.parse(t.completionDate)),n=("0"+s.getDate()).slice(-2)+"/"+("0"+(s.getMonth()+1)).slice(-2)+"/"+s.getFullYear();return{invoiceNumber:t.invoiceNumber,date:n,status:t.status,total:t.finalGrandTotal,shippingAddressCountry:t.shippingAddressCountry}});this.orders=e}};var I=function(){var e=this,t=e._self._c;return t("div",[e.orders.length?t("k-table",{attrs:{columns:e.tablecolumns,rows:e.orders}}):e._e()],1)},R=[],A=r(F,I,R);const N=A.exports,O={name:"Vitals",components:{abandoned:b,salestotal:S,popular:D,orders:N}};var P=function(){var e=this,t=e._self._c;return t("k-grid",{staticClass:"k-snipcart-vitals",attrs:{gutter:"medium",variant:"columns"}},[t("k-column",{attrs:{width:"1/3"}},[t("salestotal")],1),t("k-column",{attrs:{width:"1/3"}},[t("popular")],1),t("k-column",{attrs:{width:"1/3"}},[t("abandoned")],1),t("k-column",{attrs:{width:"1/1"}},[t("orders")],1)],1)},j=[],L=r(O,P,j);const M=L.exports,B={props:{name:String,columns:Object,options:Array,rows:{type:Array,default(){return[]}},empty:String},data(){return{tablecolumns:{discname:{label:"Name",type:"text"},code:{label:"Code",type:"text"},expires:{label:"Expires",type:"text"},uses:{label:"Uses",type:"text"}},discounts:[]}},async created(){let e=(await this.$api.get("snipcart/discounts")).map(function(t){let s=new Date(Date.parse(t.expires)),n=("0"+s.getDate()).slice(-2)+"/"+("0"+(s.getMonth()+1)).slice(-2)+"/"+s.getFullYear();return{discname:t.discname,code:t.code,uses:t.numberOfUsages,expires:n}});this.discounts=e}};var G=function(){var e=this,t=e._self._c;return t("div",[e.discounts.length?t("k-table",{attrs:{columns:e.tablecolumns,rows:e.discounts}}):e._e()],1)},H=[],U=r(B,G,H);const V={name:"Discounts",components:{discounts:U.exports}};var Y=function(){var e=this,t=e._self._c;return t("div",[t("k-grid",{staticClass:"k-snipcart-vitals",attrs:{gutter:"medium"}},[t("k-column",{attrs:{width:"1/1"}},[t("discounts")],1)],1)],1)},q=[],z=r(V,Y,q);const J=z.exports,K={name:"Dashboard",components:{vitals:M,discounts:J,TabCard:p},data(){return{initialTab:"dashboard",tabs:["dashboard","discounts"]}}};var Q=function(){var e=this,t=e._self._c;return t("k-panel-inside",[t("TabCard",{attrs:{tabs:e.tabs,initialTab:e.initialTab}},[t("template",{slot:"tab-head-dashboard"},[e._v(" Dashboard ")]),t("template",{slot:"tab-panel-dashboard"},[t("vitals")],1),t("template",{slot:"tab-head-discounts"},[e._v(" Discounts ")]),t("template",{slot:"tab-panel-discounts"},[t("discounts")],1)],2)],1)},W=[],X=r(K,Q,W);const Z=X.exports,E={props:{label:String,value:String,disabled:Boolean,required:Boolean,value:String},data(){return{totalSales:null,productID:this.$store.getters["content/values"]().productid}},computed:{salesCount(){return this.totalSales?this.totalSales:"Loading..."}},async created(){let a=await this.$api.get("snipcart/products/"+this.productID);a===void 0||a.length==0?this.totalSales=0:this.totalSales=a.statistics.totalSales.toFixed(2)}};var tt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"k-snipcart-product-total"},[t("div",{staticClass:"k-snipcart-vital"},[t("h3",[e._v("Total Sales")]),t("span",[e._v(e._s(e.salesCount))])])])},et=[],at=r(E,tt,et);const st=at.exports;panel.plugin("hashandsalt/snipcart",{components:{dash:Z},fields:{productTotal:st}})})();
