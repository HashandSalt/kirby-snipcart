(function () {function s(a){return a&&a.__esModule?{d:a.default}:{d:a}}var i=this;var q={},t=arguments[0];!function(t){var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u=t.regeneratorRuntime;if(u)q=u;else{(u=t.regeneratorRuntime=q).wrap=m;var h="suspendedStart",s="suspendedYield",f="executing",l="completed",p={},y={};y[i]=function(){return this};var v=Object.getPrototypeOf,d=v&&v(v(G([])));d&&d!==e&&n.call(d,i)&&(y=d);var g=b.prototype=x.prototype=Object.create(y);L.prototype=g.constructor=b,b.constructor=L,b[c]=L.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===L||"GeneratorFunction"===(r.displayName||r.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(g),t},u.awrap=function(t){return{__await:t}},E($.prototype),$.prototype[a]=function(){return this},u.AsyncIterator=$,u.async=function(t,r,e,n){var o=new $(m(t,r,e,n));return u.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},E(g),g[c]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},u.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},u.values=G,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:G(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),p}}}function m(t,r,e,n){var o=r&&r.prototype instanceof x?r:x,i=Object.create(o.prototype),a=new k(n||[]);return i._invoke=function(t,r,e){var n=h;return function(o,i){if(n===f)throw new Error("Generator is already running");if(n===l){if("throw"===o)throw i;return N()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=_(a,e);if(c){if(c===p)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===h)throw n=l,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=f;var u=w(t,r,e);if("normal"===u.type){if(n=e.done?l:s,u.arg===p)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=l,e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function w(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(n){return{type:"throw",arg:n}}}function x(){}function L(){}function b(){}function E(t){["next","throw","return"].forEach(function(r){t[r]=function(t){return this._invoke(r,t)}})}function $(r){function e(t,o,i,a){var c=w(r[t],r,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?Promise.resolve(h.__await).then(function(t){e("next",t,i,a)},function(t){e("throw",t,i,a)}):Promise.resolve(h).then(function(t){u.value=t,i(u)},a)}a(c.arg)}var o;"object"==typeof t.process&&t.process.domain&&(e=t.process.domain.bind(e)),this._invoke=function(t,r){function n(){return new Promise(function(n,o){e(t,r,n,o)})}return o=o?o.then(n,n):n()}}function _(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,_(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=w(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function j(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function G(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:N}}function N(){return{value:r,done:!0}}}("object"==typeof i?i:"object"==typeof window?window:"object"==typeof self?self:q);function j(n,e,t,r,a,o,u){try{var i=n[o](u),c=i.value}catch(s){return void t(s)}i.done?e(c):Promise.resolve(c).then(r,a)}function p(n){return function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function u(n){j(o,r,a,u,i,"next",n)}function i(n){j(o,r,a,u,i,"throw",n)}u(void 0)})}}var c={data:function(){return{abandoned:null}},computed:{abandonedCount:function(){return this.abandoned?this.abandoned.length:"Loading..."}},created:function(){var n=p(regeneratorRuntime.mark(function n(){var e;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$api.get("snipcart/carts/abandoned");case 2:e=n.sent,this.abandoned=e.items;case 4:case"end":return n.stop();}},n,this)}));return function(){return n.apply(this,arguments)}}()};if(typeof c==="function"){c=c.options}Object.assign(c,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"k-snipcart-vital"},[_c("h3",[_vm._v("Abandonded Carts")]),_vm._v(" "),_c("span",[_vm._v(_vm._s(_vm.abandonedCount))])])};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());function h(t,e,r,n,a,o,s){try{var u=t[o](s),i=u.value}catch(c){return void r(c)}u.done?e(i):Promise.resolve(i).then(n,a)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var o=t.apply(e,r);function s(t){h(o,n,a,s,u,"next",t)}function u(t){h(o,n,a,s,u,"throw",t)}s(void 0)})}}var d={data:function(){return{totalSales:null}},computed:{salesCount:function(){return this.totalSales?this.totalSales:"Loading..."}},created:function(){var t=o(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$api.get("snipcart/orders");case 2:e=t.sent,r=e.items.reduce(function(t,e){return t+e.finalGrandTotal},0),"\xA3",this.totalSales="\xA3"+r;case 6:case"end":return t.stop();}},t,this)}));return function(){return t.apply(this,arguments)}}()};if(typeof d==="function"){d=d.options}Object.assign(d,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"k-snipcart-vital"},[_c("h3",[_vm._v("Total Sales")]),_vm._v(" "),_c("span",[_vm._v(_vm._s(_vm.salesCount))])])};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());function l(r,e,t,n,a,o,u){try{var c=r[o](u),i=c.value}catch(s){return void t(s)}c.done?e(i):Promise.resolve(i).then(n,a)}function m(r){return function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function u(r){l(o,n,a,u,c,"next",r)}function c(r){l(o,n,a,u,c,"throw",r)}u(void 0)})}}var e={data:function(){return{popularItem:null}},computed:{popularCount:function(){return this.popularItem?this.popularItem:"Loading..."}},created:function(){var r=m(regeneratorRuntime.mark(function r(){var e,t,n,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.$api.get("snipcart/orders");case 2:e=r.sent,t=e.items.reduce(function(r,e){return r.concat(e.items)},[]),n=t.map(function(r){return r.name}).reduce(function(r,e){var t=r[e]||0;return r[e]=t+1,r},{}),a=Object.keys(n).reduce(function(r,e){return n[r]>n[e]?r:e}),this.popularItem=a;case 7:case"end":return r.stop();}},r,this)}));return function(){return r.apply(this,arguments)}}()};if(typeof e==="function"){e=e.options}Object.assign(e,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"k-snipcart-vital"},[_c("h3",[_vm._v("Most Popular")]),_vm._v(" "),_c("span",[_vm._v(_vm._s(_vm.popularCount))])])};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());function k(e,r,t,a,n,o,i){try{var s=e[o](i),d=s.value}catch(c){return void t(c)}s.done?r(d):Promise.resolve(d).then(a,n)}function n(e){return function(){var r=this,t=arguments;return new Promise(function(a,n){var o=e.apply(r,t);function i(e){k(o,a,n,i,s,"next",e)}function s(e){k(o,a,n,i,s,"throw",e)}i(void 0)})}}var g,f={};!function(t,e){"object"==typeof f?f=e():"function"==typeof g&&g.amd?g(e):(t=t||self).Tbl=e()}(f,function(){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}return function(t,e,n,r,s,o,i,a,c,l){"boolean"!=typeof i&&(a,a=i,i=!1);var d,u="function"==typeof n?n.options:n;if(t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0),d)if(u.functional){var f=u.render;u.render=function(t,e){return d.call(e),f(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,d):[d]}return n}({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"tbl",attrs:{"data-version":"1.0.9"}},[n("header",{staticClass:"k-section-header"},[t._t("headline",[n("k-headline",[t._v(t._s(t.headline))])]),t._v(" "),t._t("filter",[n("k-button-group",[t.showReset?n("button",{staticClass:"tbl-reset",on:{click:t.reset}},[t._v("\n          "+t._s(t.config.labels.reset)+"\n        ")]):t._e(),t._v(" "),t.showSearch?n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],ref:"search",staticClass:"tbl-search",attrs:{type:"text",placeholder:t.config.labels.filter},domProps:{value:t.searchTerm},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.reset(e)},input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}}):t._e(),t._v(" "),t.showAdd?n("k-button",{attrs:{icon:"add"},on:{click:function(e){return t.$emit("add")}}},[t._v("\n          "+t._s(t.$t("add"))+"\n        ")]):t._e()],1)])],2),t._v(" "),t._t("table",[n("table",[n("thead",[0===t.rowsFiltered.length?n("th",{attrs:{colspan:t.widthLoading}}):[t._l(t.columns,function(e){return n("th",{key:e.field,class:"head-"+(e.class||"field-"+e.field),attrs:{"data-align":t.getAlign(e),"data-width":e.width,"data-responsive":!1!==e.responsive,"data-sortable":t.config.sort.enabled&&!1!==e.sort,"data-sorted":t.sortBy===e&&(1===t.sortOrder?"asc":"desc")},on:{click:function(n){return t.setSort(e)}}},[t._v("\n            "+t._s(e.label)+"\n          ")])}),t._v(" "),t.showActions?n("th",{attrs:{"data-width":t.widthActions}}):t._e()]],2),t._v(" "),n("tbody",[0===t.rowsFiltered.length?n("tr",[n("td",{attrs:{colspan:t.widthLoading,"data-align":"center"}},[t._t("empty-row",[n("p",[this.isLoading?n("k-icon",{attrs:{type:"loader"}}):n("span",[t._v(t._s(t.config.labels.empty))])],1)])],2)]):t._l(t.rowsPaginated,function(e,r){return n("tr",{key:"row_"+r},[t._l(t.columns,function(s){return n("td",{key:s.field,class:"row-"+(s.class||"field-"+s.field),attrs:{"data-width":s.width,"data-align":t.getAlign(s),"data-responsive":!1!==s.responsive},on:{click:function(n){return t.$emit("action",[t.config.actions.onRow,e,s.field])}}},[t._t("column-"+(s.name||s.field),[t._t("column-$default",["url"===s.type?n("k-url-field-preview",{attrs:{value:e[s.field]}}):n("p",{domProps:{innerHTML:t._s(t.getValue(e[s.field],s.type))}})],{index:r,column:s,field:s.field,row:e,value:t.getValue(e[s.field],s.type)})],{index:r,column:s,field:s.field,row:e,value:t.getValue(e[s.field],s.type)})],2)}),t._v(" "),t.showActions?n("td",{staticClass:"tbl-options",attrs:{"data-width":t.widthActions,"data-align":"center"}},[t._t("column-$actions",[t.config.actions.inline?t._l(t.config.actions.items,function(r){return n("k-button",{key:r.click,attrs:{tooltip:r.text,icon:r.icon},on:{click:function(n){return n.stopPropagation(),t.$emit("action",[r.click,e])}}})}):[n("k-button",{attrs:{tooltip:t.$t("options"),icon:"dots"},on:{click:function(e){e.stopPropagation(),t.$refs["options-"+r][0].toggle()}}}),t._v(" "),n("k-dropdown-content",{ref:"options-"+r,refInFor:!0,attrs:{options:t.config.actions.items,align:"right"},on:{action:function(n){return t.$emit("action",[n,e])}}})]],{row:e,index:r})],2):t._e()],2)})],2)])]),t._v(" "),n("footer",{staticClass:"tbl-footer"},[t._t("footer",[t.rowsFiltered.length>0?[n("div",{staticClass:"tbl-perPage"},[t._t("footer-before-perPage"),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.perPage,expression:"perPage"}],attrs:{autocomplete:"off"},on:{input:t.onPerPage,change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.perPage=e.target.multiple?n:n[0]}}},[t._l(t.config.pagination.perPageOptions,function(e){return n("option",{key:e,domProps:{value:e,textContent:t._s(e)}})}),t._v(" "),n("option",{domProps:{value:this.rowsFiltered.length}},[t._v("\n              "+t._s(t.config.labels.all)+"\n            ")])],2),t._v(" "),n("span",[t._v(t._s(t.config.labels.perPage))]),t._v(" "),t._t("footer-after-perPage")],2),t._v(" "),t._t("footer-center"),t._v(" "),n("div",{staticClass:"tbl-navigation"},[t._t("footer-before-pagination"),t._v(" "),t.rowsFiltered.length>t.perPage?[n("div",{staticClass:"btn btn-prev",attrs:{"data-disabled":t.page<=1},on:{click:function(e){return t.navigate(-1)}}},[n("span",{staticClass:"chevron"}),t._v(" "),n("span",[t._v(t._s(t.$t("prev")))])]),t._v(" "),n("div",{staticClass:"info"},[t._v("\n              "+t._s(this.pageRowFirst)+" - "+t._s(Math.min(this.pageRowLast,this.rowsFiltered.length))+" of "+t._s(this.rowsFiltered.length)+"\n            ")]),t._v(" "),n("div",{staticClass:"btn btn-next",attrs:{"data-disabled":t.page*t.perPage>=t.rowsFiltered.length},on:{click:function(e){return t.navigate(1)}}},[n("span",[t._v(t._s(t.$t("next")))]),t._v(" "),n("span",{staticClass:"chevron"})])]:t._e(),t._v(" "),t._t("footer-after-pagination")],2)]:t._e()])],2),t._v(" "),t._t("dialogs")],2)},staticRenderFns:[]},0,{props:{headline:String,columns:Array,rows:Array,options:Object,actions:Object,labels:Object,pagination:{type:[Boolean,Object],default:function(){return{}}},search:{type:[Boolean,Object],default:function(){return{}}},sort:{type:[Boolean,Object],default:function(){return{}}},store:{type:[Boolean,Object],default:function(){return{}}},isLoading:{type:Boolean,default:!1}},data:function(){return{searchTerm:"",sortBy:null,sortOrder:1,page:1,perPage:10}},computed:{config:function(){return Object.assign({actions:Object.assign({inline:!1,items:[],onRow:!1},this.actions),labels:Object.assign({all:"All",empty:"No rows available",perPage:"rows displayed",reset:"Reset",filter:"Filter items..."},this.labels),pagination:Object.assign({enabled:!0,page:1,perPage:10,perPageOptions:[5,10,25,50,100]},this.resolveOptions(this.pagination)),search:Object.assign({enabled:!0},this.resolveOptions(this.search)),sort:Object.assign({enabled:!0,initialBy:null},this.resolveOptions(this.sort)),store:Object.assign({enabled:!1,name:""},this.resolveOptions(this.store)),add:!1,reset:!0},this.options)},pageOffset:function(){return(this.page-1)*this.perPage},pageRowFirst:function(){return this.pageOffset+1},pageRowLast:function(){return this.pageOffset+this.perPage},rowsFiltered:function(){var t=this;if(""===this.searchTerm)return this.rows;var e=this.searchTerm.toLowerCase();return this.rows.slice().filter(function(n){var r=!1;return Object.keys(n).forEach(function(s){var o=t.columns.find(function(t){return t.field===s});o&&!1!==o.search&&String(n[s]).toLowerCase().includes(e)&&(r=!0)}),r})},rowsPaginated:function(){return this.rowsSorted.slice(this.pageOffset,this.pageOffset+this.perPage)},rowsSorted:function(){var t=this;return this.sortBy&&!1!==this.config.sort.enabled?this.rowsFiltered.slice().sort(function(e,n){if(t.sortBy.field&&(e=e[t.sortBy.field],n=n[t.sortBy.field]),t.sortBy.sort&&t.sortBy.sort.field&&(e=e[t.sortBy.sort.field],n=n[t.sortBy.sort.field]),t.sortBy.sort&&t.sortBy.sort.value&&(e=e[t.sortBy.sort.value],n=n[t.sortBy.sort.value]),t.sortBy.callback)return t.sortBy.callback(e,n,t.sortOrder,t.sortBy);switch(t.sortBy.type){case"number":return(e-n)*t.sortOrder;case"date":return(new Date(e)-new Date(n))*t.sortOrder;default:return e=(""+e).toLowerCase(),n=(""+n).toLowerCase(),e.localeCompare(n)*t.sortOrder;}}):this.rowsFiltered},showActions:function(){return!!this.$scopedSlots["column-$actions"]||!!this.config.actions.items&&this.config.actions.items.length>0},showAdd:function(){return this.config.add},showReset:function(){return this.config.reset&&(""!==this.searchTerm||null!==this.sortBy)},showSearch:function(){return this.columns.filter(function(t){return!1!==t.search}).length>0&&this.config.search.enabled},storeName:function(){return"kirby$plugin$tbl$"+this.config.store.name},widthActions:function(){return this.config.actions.width?this.config.actions.width:(this.config.actions.inline?this.config.actions.items.length:1)+"fr"},widthLoading:function(){return Math.max(this.columns.length,1)+(this.showActions?1:0)}},watch:{config:function(){this.load()},searchTerm:function(t){this.setStore(),this.page=1,this.$emit("onFilter",t)}},created:function(){this.load()},methods:{getAlign:function(t){if(t.align)return t.align;switch(t.type){case"number":case"decimal":case"percentage":case"boolean":case"date":return"right";default:return"left";}},getValue:function(t,e){switch(e){case"date":return t?new Date(t).toLocaleString(this.$user.language.replace("_","-"),{year:"numeric",month:"long",day:"numeric"}):"\u2013";case"number":return t?1*t:"\u2013";case"decimals":return t?Number(t).toFixed(2):"\u2013";case"percentage":return t?Number(100*t).toFixed(2)+" %":"\u2013 %";default:return t||null;}},load:function(){this.page=this.config.pagination.page,this.perPage=this.config.pagination.perPage,this.loadStore(),this.loadSort()},loadSort:function(){if(!0===this.config.sort.enabled&&null===this.sortBy){var t=this.config.sort.initialBy;if(t){var e=this.columns.find(function(e){return e.name===t});e||(e=this.columns.find(function(e){return e.field===t})),this.setSort(e)}}},loadStore:function(){if(!0===this.config.store.enabled){var t=JSON.parse(sessionStorage.getItem(this.storeName));null!==t&&(this.page=t.page,this.perPage=t.perPage,this.searchTerm=t.searchTerm,this.sortBy=t.sortBy,this.sortOrder=t.sortOrder),this.$emit("onLoadStore",t)}},navigate:function(t){this.page+=t,this.setStore(),this.$emit("onPage",this.page)},onPerPage:function(){this.page=1,this.setStore(),this.$emit("onPerPage",this.perPage)},reset:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.$refs.search.blur(),this.setStore(),this.$emit("onReset")},resolveOptions:function(e){return 0===Object.keys(e).length?e:t(e)==t(!0)?{enabled:e}:Object.assign({enabled:!0},e)},setSort:function(t){!1!==this.config.sort.enabled&&!1!==t.sort&&(this.sortBy===t?this.sortOrder*=-1:(this.sortBy=t,this.sortOrder="desc"===(t.sort&&t.sort.order?t.sort.order:t.sort)?-1:1),this.setStore(),this.$emit("onSort",Object.assign({},t,{currentDirection:this.sortOrder})))},setStore:function(){var t=this;!0===this.config.store.enabled&&this.$nextTick(function(){var e={page:t.page,perPage:t.perPage,searchTerm:t.searchTerm,sortBy:t.sortBy,sortOrder:t.sortOrder};sessionStorage.setItem(t.storeName,JSON.stringify(e)),t.$emit("onLoadStore",e)})}}},0,0,0,void 0,void 0)});var r=s(f);var b={components:{Tbl:r.d},data:function(){return{orders:[]}},computed:{columns:function(){return[{name:"id",label:"No.",field:"invoiceNumber",sort:!0,search:!1},{name:"date",label:"Created",field:"creationDate",type:"date"},{name:"status",label:"Status",field:"status",sort:!1,search:!1},{name:"payment",label:"Paid with",field:"paymentMethod"},{name:"total",label:"Total",field:"finalGrandTotal",type:"decimal",sort:!0,search:!1},{name:"address",label:"Ship to",field:"shippingAddressCountry"},{name:"user",label:"User",field:"cardHolderName"}]},config:function(){return{}}},created:function(){var e=n(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.get("snipcart/orders");case 2:r=e.sent,this.orders=r.items;case 4:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()};if(typeof b==="function"){b=b.options}Object.assign(b,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("tbl",_vm._b({attrs:{"headline":"Orders","columns":_vm.columns,"rows":_vm.orders,"is-loading":this.$store.state.isLoading}},"tbl",_vm.config,false))};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());var a={components:{abandoned:c,"sales-total":d,popular:e,orders:b}};if(typeof a==="function"){a=a.options}Object.assign(a,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("k-view",{staticClass:"k-snipcart-view"},[_c("k-header",[_vm._v("Dashboard")]),_vm._v(" "),_c("k-grid",{staticClass:"k-snipcart-vitals",attrs:{"gutter":"medium"}},[_c("k-column",{attrs:{"width":"1/3"}},[_c("sales-total")],1),_vm._v(" "),_c("k-column",{attrs:{"width":"1/3"}},[_c("popular")],1),_vm._v(" "),_c("k-column",{attrs:{"width":"1/3"}},[_c("abandoned")],1),_vm._v(" "),_c("k-column",{attrs:{"width":"1/1"}},[_c("orders")],1)],1)],1)};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());panel.plugin("hashandsalt/kirby-snipcart",{views:{snipcartproducts:{component:a,icon:"cart",label:"Snipcart"}}});})();